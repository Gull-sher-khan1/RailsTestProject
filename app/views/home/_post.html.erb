<div class="home-page-content-posts">
  <div id="home-page-content-post-<%= post.id %>">
    <div class="home-page-content-post-user">
      <div class="user-image-post">
        <%= render partial: 'userinfo', locals: {user: users[user_ids.find_index(post.user_id)], partial:true}%>
      </div>
      <div class="post_update_delete">
        <%= button_to "edit"%>
        <%= button_to "delete", {controller: :posts, action: :destroy, id: post.id}, method: :delete, remote: :true%>
      </div>
    </div>

    <div class="home-page-content-post-text">
      <div class="post-body">
        <p><%= post.text%></p>
      </div>
    </div>

    <div class="home-page-content-post-button home-page-content-post-button-border-removed">
      <%like_id=Like.where(likeable_id: post.id, user_id: signed_user.id).pluck(:id)%>
      <%= form_with url: {controller: :likes, action: :create, user_id: signed_user.id}, id: "like_ajax_#{post.id}" do |form| %>
      <%= form.hidden_field :likeable_id, value: post.id, autocomplete: 'off' %>
      <%= form.hidden_field :from, value: :post, autocomplete: 'off' %>
      <% end %>
      <div id="like_buttons_<%=post.id%>">
      <%if like_id.size == 0%>
        <%= button_tag "Like", type: 'submit', form: "like_ajax_#{post.id}", id:"like_post_#{post.id}"%>
      <%else%>
        <%= button_to "Liked",{controller: :likes, action: :destroy, id: like_id[0]}, method: :delete, remote: :true, id:"like_post_#{post.id}"%>
      <%end%>
      </div>
      <%= form_with url: get_comments_path, id: "comments_ajax_#{post.id}" do |form| %>
      <%= form.hidden_field :commentable_id, value: post.id, autocomplete: 'off' %>
      <% end %>
      <%= button_tag "comments", onclick: "show_post_comments(#{post_iteration.index})", type: 'submit', form: "comments_ajax_#{post.id}"%>
    </div>
    <div class="home-page-content-comments-div display-none">
      <div class="home-page-content-new-comment ">
        <%= form_with model: Comment.new ,url: {action: :create, controller: :comments, user_id: @user.id}, method: :post, class: 'new-comment' do |f| %>
        <!--must copy new_post from scss file before transferring-->
        <%= f.hidden_field :commentable_id, value: post.id %>
        <%= f.text_area :text, class: 'comment-text' %>
        <%= f.submit 'comment'%>
        <% end%>
      </div>
      <div id="home_post_comments_<%= post.id%>">
      </div>
    </div>
  </div>
</div>
